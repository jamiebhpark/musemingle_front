### ìº¡ìŠ¤í†¤ ë””ìì¸ í”„ë¡œì íŠ¸

https://youtu.be/6kKQsWZ15y0

### ğŸ¨ MuseMingle - ì˜ˆìˆ ê°€ì™€ ê°¤ëŸ¬ë¦¬ë¥¼ ìœ„í•œ ì¢…í•© í”Œë«í¼

## ğŸ“± í”„ë¡œì íŠ¸ ê°œìš”

**MuseMingle**ì€ ì˜ˆìˆ ê°€ì™€ ê°¤ëŸ¬ë¦¬ ê°„ì˜ ìƒí˜¸ ì‘ìš©ì„ ì§€ì›í•˜ëŠ” í”Œë«í¼ìœ¼ë¡œ, ì˜ˆìˆ  ì‘í’ˆì˜ ì—…ë¡œë“œ, ì „ì‹œíšŒ ê´€ë¦¬, ê·¸ë¦¬ê³  ë‹¤ì–‘í•œ ì‚¬ìš©ì ì¸ì¦ ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ í”„ë¡œì íŠ¸ëŠ” iOS ëª¨ë°”ì¼ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ë°±ì—”ë“œ ì„œë²„ë¡œ êµ¬ì„±ë˜ì–´ ìˆìœ¼ë©°, ì‚¬ìš©ìëŠ” ìì‹ ì˜ ì˜ˆìˆ  ì‘í’ˆì„ ê³µìœ í•˜ê³  ì „ì‹œíšŒë¥¼ ê´€ë¦¬í•˜ë©°, ë‹¤ì–‘í•œ ì¸ì¦ ë°©ë²•ì„ í†µí•´ ì•ˆì „í•˜ê²Œ ë¡œê·¸ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

### iOS í”„ë¡ íŠ¸ì—”ë“œ

- **ì‚¬ìš©ì ì¸ì¦ ë° ë¡œê·¸ì¸**
    - OAuth2 ê¸°ë°˜ì˜ ì†Œì…œ ë¡œê·¸ì¸ (Apple, Google, Facebook)
    - JWT ê¸°ë°˜ì˜ í† í° ì¸ì¦ ì‹œìŠ¤í…œ
    - ì‚¬ìš©ìì˜ ë¡œê·¸ì¸ ìƒíƒœë¥¼ `Combine`ì„ ì‚¬ìš©í•´ ì‹¤ì‹œê°„ìœ¼ë¡œ ê´€ë¦¬
- **ì˜ˆìˆ  ì‘í’ˆ ê´€ë¦¬**
    - ì˜ˆìˆ  ì‘í’ˆì˜ ë“±ë¡, ìˆ˜ì •, ì‚­ì œ ê¸°ëŠ¥ ì œê³µ
    - ì‘í’ˆì˜ ì´ë¯¸ì§€ ì—…ë¡œë“œ (AWS S3 ì—°ë™)
    - ìƒì„¸ í˜ì´ì§€ì—ì„œ ì‘í’ˆì˜ ì„¸ë¶€ ì •ë³´ í™•ì¸ ê°€ëŠ¥
- **ì „ì‹œíšŒ ê´€ë¦¬**
    - ì „ì‹œíšŒ ìƒì„±, ìˆ˜ì •, ì‚­ì œ ê¸°ëŠ¥ ì œê³µ
    - ì „ì‹œíšŒì— í¬ìŠ¤í„° ì´ë¯¸ì§€ ì—…ë¡œë“œ (AWS S3 ì—°ë™)
    - ì „ì‹œíšŒ ìƒíƒœ (ì˜ˆì •, ì§„í–‰ ì¤‘, ì¢…ë£Œ) ê´€ë¦¬
- **í”„ë¡œí•„ ë° ì•„ì¹´ì´ë¸Œ**
    - ì‚¬ìš©ìì˜ í”„ë¡œí•„ ì—…ë°ì´íŠ¸, ì•„ì¹´ì´ë¸Œ ê´€ë¦¬ ê¸°ëŠ¥
    - ì‘í’ˆì„ ë¶ë§ˆí¬í•˜ì—¬ ì•„ì¹´ì´ë¸Œì— ì¶”ê°€

### ë°±ì—”ë“œ

- **ì‚¬ìš©ì ê´€ë¦¬**
    - ì‚¬ìš©ì ë“±ë¡, ë¡œê·¸ì¸ ë° ì¸ì¦ ì²˜ë¦¬
    - ì‚¬ìš©ì ì •ë³´ ìˆ˜ì • ë° ê³„ì • ì‚­ì œ ê¸°ëŠ¥ ì œê³µ
- **ì˜ˆìˆ  ì‘í’ˆ ê´€ë¦¬**
    - ì˜ˆìˆ  ì‘í’ˆì˜ ë“±ë¡, ìˆ˜ì •, ì‚­ì œ API ì œê³µ
    - ì˜ˆìˆ  ì‘í’ˆì˜ ì´ë¯¸ì§€ ì—…ë¡œë“œ ë° ì‚­ì œ ê¸°ëŠ¥ (AWS S3 ì—°ë™)
- **ì „ì‹œíšŒ ê´€ë¦¬**
    - ì „ì‹œíšŒì˜ ë“±ë¡, ìˆ˜ì •, ì‚­ì œ API ì œê³µ
    - ì „ì‹œíšŒ í¬ìŠ¤í„° ì´ë¯¸ì§€ ê´€ë¦¬ (AWS S3 ì—°ë™)
- **íŒŒì¼ ê´€ë¦¬**
    - AWS S3ë¥¼ í†µí•œ ì•ˆì „í•œ íŒŒì¼ ì—…ë¡œë“œ ë° ì‚­ì œ ê¸°ëŠ¥
    - ì‚¬ìš©ì í”„ë¡œí•„ ì´ë¯¸ì§€ ë° í•™ìœ„ ì¦ëª…ì„œ ê´€ë¦¬

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

- **í”„ë¡ íŠ¸ì—”ë“œ**: SwiftUI, Combine, Swift (iOS)
- **ë°±ì—”ë“œ**: Kotlin, Spring Boot, JPA, AWS S3
- **ë°ì´í„°ë² ì´ìŠ¤**: MySQL (JPA ì—°ë™)
- **ë³´ì•ˆ**: JWT (JSON Web Tokens) ê¸°ë°˜ ì¸ì¦, OAuth2 (Google, Facebook, Apple)
- **ë°°í¬**: AWS (S3, EC2)

---

## ğŸ’¼ ê°œë°œ ê³¼ì •ì—ì„œì˜ ì—­í•  ë° ê¸°ì—¬

### iOS í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ

- **ì£¼ìš” ê¸°ëŠ¥**: ë¡œê·¸ì¸/íšŒì›ê°€ì…, ì „ì‹œíšŒ ë° ì‘í’ˆ ê´€ë¦¬, ê²€ìƒ‰, ì‚¬ìš©ì í”„ë¡œí•„ ë° ì•„ì¹´ì´ë¸Œ ê´€ë¦¬
- **ìƒíƒœ ê´€ë¦¬**: `Combine`ì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ì ì¸ì¦ ìƒíƒœì™€ UI ê°„ì˜ ìƒíƒœ ê´€ë¦¬ë¥¼ êµ¬í˜„
- **UI/UX ì„¤ê³„**: SwiftUIë¥¼ ì´ìš©í•˜ì—¬ ë‹¤ì–‘í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„¤ê³„í•˜ê³  ì‚¬ìš©ì ê²½í—˜ì„ ìµœì í™”
- **Apple Sign-In êµ¬í˜„**: `AuthenticationServices`ë¥¼ ì´ìš©í•˜ì—¬ Apple ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸ ê¸°ëŠ¥ì„ êµ¬í˜„

### ë°±ì—”ë“œ ê°œë°œ

- **ì£¼ìš” ê¸°ëŠ¥**: ì‚¬ìš©ì ê´€ë¦¬, ì‘í’ˆ ë° ì „ì‹œíšŒ ê´€ë¦¬, íŒŒì¼ ì—…ë¡œë“œ ë° ì‚­ì œ (AWS S3 ì—°ë™)
- **ë³´ì•ˆ**: JWTë¥¼ í™œìš©í•˜ì—¬ ì‚¬ìš©ì ì¸ì¦ì„ ê°•í™”í•˜ê³  OAuth2ë¥¼ í†µí•œ ì†Œì…œ ë¡œê·¸ì¸ ê¸°ëŠ¥ êµ¬í˜„
- **ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™**: Spring Data JPAë¥¼ ì‚¬ìš©í•˜ì—¬ MySQLê³¼ì˜ ë°ì´í„° ì—°ë™ì„ ê´€ë¦¬
- **AWS S3 ì—°ë™**: íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ ë° ì‚­ì œ ê¸°ëŠ¥ì„ S3ì™€ ì—°ë™í•˜ì—¬ êµ¬í˜„

---

## ğŸš€ í”„ë¡œì íŠ¸ì˜ ì„±ê³¼ ë° ì˜ë¯¸

- **ê°„í¸í•œ ì¸ì¦ ì‹œìŠ¤í…œ**: ë‹¤ì–‘í•œ OAuth2 ì¸ì¦ ë°©ì‹ì„ ì œê³µí•¨ìœ¼ë¡œì¨ ì‚¬ìš©ì í¸ì˜ì„±ì„ ê·¹ëŒ€í™”í–ˆìŠµë‹ˆë‹¤.
- **ê°•í™”ëœ ë³´ì•ˆ**: JWT ê¸°ë°˜ì˜ í† í° ì¸ì¦ìœ¼ë¡œ ì‚¬ìš©ìì˜ ë°ì´í„° ë³´í˜¸ë¥¼ ê°•í™”í–ˆìŠµë‹ˆë‹¤.
- **ìœ ì—°í•œ íŒŒì¼ ê´€ë¦¬**: AWS S3ì™€ì˜ ì—°ë™ì„ í†µí•´ íŒŒì¼ì„ ì•ˆì „í•˜ê³  íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
- **ëª¨ë°”ì¼ UX ìµœì í™”**: SwiftUIë¥¼ í™œìš©í•˜ì—¬ ì§ê´€ì ì´ê³  ë°˜ì‘ì„±ì´ ë›°ì–´ë‚œ UIë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

---

### ğŸš€Â ë§í¬ ë° ìë£Œ

- **ë°ëª¨ ë¹„ë””ì˜¤:** [YouTube](https://www.youtube.com/watch?v=6kKQsWZ15y0)
- **GitHub ì €ì¥ì†Œ:**
    - [í”„ë¡ íŠ¸ì—”ë“œ (Swift)](https://github.com/jamiebhpark/musemingle_front/tree/main/musemingle)
    - [ë°±ì—”ë“œ (Kotlin)](https://github.com/jamiebhpark/musemingle_back/tree/main/src/main/kotlin/mingle/musemingle)
    - [ë°ì´í„°ë² ì´ìŠ¤ ë° AWS êµ¬ì„±](https://github.com/jamiebhpark/musemingle_db_aws)
- **ë¬¸ì„œ:**
    - [í”„ë¡œì íŠ¸ ìš”ì•½ (Notion)](https://www.notion.so/Project-Summary-7bb8bb2f43c3495a833778264063f7d1?pvs=21)
    - [ë””ìì¸ ë° ì™€ì´ì–´í”„ë ˆì„ (Figma)](https://www.notion.so/Wireframe-Flowchart-42248fc6f9be46b2ad3c17751eaf1a1c?pvs=21)

---

## ğŸ’» ì½”ë“œ ìŠ¤ë‹ˆí«

### 1. Apple Sign-In ì—°ë™ (iOS)

```swift
import AuthenticationServices
import SwiftKeychainWrapper

class AppleSignInManager: NSObject, ASAuthorizationControllerDelegate, ObservableObject {
    var loginStatusViewModel: LoginStatusViewModel

    init(loginStatusViewModel: LoginStatusViewModel) {
        self.loginStatusViewModel = loginStatusViewModel
    }

    func signIn() {
        let request = ASAuthorizationAppleIDProvider().createRequest()
        request.requestedScopes = [.fullName, .email]

        let controller = ASAuthorizationController(authorizationRequests: [request])
        controller.delegate = self
        controller.performRequests()
    }

    func authorizationController(controller: ASAuthorizationController, didCompleteWithAuthorization authorization: ASAuthorization) {
        if let appleIDCredential = authorization.credential as? ASAuthorizationAppleIDCredential {
            if let identityToken = appleIDCredential.identityToken,
               let identityTokenString = String(data: identityToken, encoding: .utf8) {
                sendTokenToServer(token: identityTokenString)
            }
        }
    }

    private func sendTokenToServer(token: String) {
        let url = URL(string: "http://3.34.187.225/auth/apple")!
        var request = URLRequest(url: url)
        request.httpMethod = "POST"
        request.setValue("application/json", forHTTPHeaderField: "Content-Type")

        do {
            request.httpBody = try JSONSerialization.data(withJSONObject: ["id_token": token])
        } catch let error {
            print("Error encoding JSON: \(error)")
            return
        }

        URLSession.shared.dataTask(with: request) { (data, response, error) in
            if let error = error {
                print("Error occurred while validating the token: \(error)")
                return
            }
            // Handle response
        }.resume()
    }
}

```

**ì„¤ëª…**:
ì´ ì½”ë“œ ìŠ¤ë‹ˆí«ì€ **Apple Sign-In** ê¸°ëŠ¥ì„ êµ¬í˜„í•œ ë¶€ë¶„ì…ë‹ˆë‹¤. `AppleSignInManager` í´ë˜ìŠ¤ëŠ” Appleì˜ ì¸ì¦ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìë¥¼ ë¡œê·¸ì¸ì‹œí‚¤ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

- `signIn()` ë©”ì„œë“œëŠ” Apple IDë¡œ ë¡œê·¸ì¸ì„ ì‹œë„í•˜ëŠ” ê³¼ì •ì—ì„œ ì‚¬ìš©ë˜ë©°, `ASAuthorizationAppleIDProvider`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸ì¦ ìš”ì²­ì„ ë§Œë“­ë‹ˆë‹¤.
- `authorizationController` ë©”ì„œë“œëŠ” ì‚¬ìš©ìê°€ ì„±ê³µì ìœ¼ë¡œ ì¸ì¦ì„ ë§ˆì³¤ì„ ë•Œ í˜¸ì¶œë˜ë©°, ë°›ì€ í† í°ì„ ì„œë²„ì— ì „ë‹¬í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
- `sendTokenToServer` ë©”ì„œë“œëŠ” ì¸ì¦ í›„ ë°›ì€ í† í°ì„ ì„œë²„ë¡œ ë³´ë‚´ëŠ” ê³¼ì •ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ í† í°ì€ ì„œë²„ì—ì„œ ê²€ì¦ë˜ì–´, ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ Appleì—ì„œ ì¸ì¦í•œ ì‚¬ìš©ìì¸ì§€ë¥¼ í™•ì¸í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

ì´ ì½”ë“œ ìŠ¤ë‹ˆí«ì€ MuseMingle ì•±ì—ì„œ ì‚¬ìš©ìì˜ Apple ê³„ì •ì„ í†µí•´ ì•ˆì „í•˜ê³  ê°„í¸í•˜ê²Œ ë¡œê·¸ì¸í•  ìˆ˜ ìˆê²Œ í•˜ëŠ” í•µì‹¬ ê¸°ëŠ¥ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.

### 2. íŒŒì¼ ì—…ë¡œë“œ ë° ì‚­ì œ (AWS S3 ì—°ë™)

```kotlin
@Service
class S3Service {

    private val bucketName = "musemingle-app-images"
    private val region = Region.AP_NORTHEAST_2
    private val s3 = S3Client.builder().region(region).build()

    fun uploadFile(directory: String, file: ByteArray, originalFilename: String): String {
        val key = "$directory/$originalFilename"
        s3.putObject(
            PutObjectRequest.builder()
                .bucket(bucketName)
                .key(key)
                .build(),
            RequestBody.fromBytes(file)
        )
        return s3.utilities().getUrl { builder -> builder.bucket(bucketName).key(key) }.toExternalForm()
    }

    fun deleteFile(url: String) {
        val key = url.replace("https://${bucketName}.s3.${region.id()}.amazonaws.com/", "")
        s3.deleteObject(DeleteObjectRequest.builder().bucket(bucketName).key(key).build())
    }
}

```

**ì„¤ëª…**:
ì´ ì½”ë“œ ìŠ¤ë‹ˆí«ì€ **AWS S3**ë¥¼ ì´ìš©í•´ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  ì‚­ì œí•˜ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

- `uploadFile` ë©”ì„œë“œëŠ” íŒŒì¼ì„ S3 ë²„í‚·ì— ì—…ë¡œë“œí•˜ê³ , ì—…ë¡œë“œëœ íŒŒì¼ì˜ URLì„ ë°˜í™˜í•©ë‹ˆë‹¤. íŒŒì¼ì€ ì§€ì •ëœ ë””ë ‰í† ë¦¬ì™€ ì›ë³¸ íŒŒì¼ ì´ë¦„ì„ ê¸°ë°˜ìœ¼ë¡œ S3ì— ì €ì¥ë©ë‹ˆë‹¤.
- `deleteFile` ë©”ì„œë“œëŠ” S3ì— ì €ì¥ëœ íŒŒì¼ì„ URLì„ í†µí•´ ì‚­ì œí•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

ì´ ì½”ë“œ ìŠ¤ë‹ˆí«ì€ MuseMingleì—ì„œ ì‚¬ìš©ì í”„ë¡œí•„ ì´ë¯¸ì§€, ì˜ˆìˆ  ì‘í’ˆ ì´ë¯¸ì§€, ì „ì‹œíšŒ í¬ìŠ¤í„° ì´ë¯¸ì§€ ë“±ì„ S3ì— ì €ì¥í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì´ë¯¸ì§€ íŒŒì¼ì„ ì•ˆì „í•˜ê²Œ ì €ì¥í•˜ê³ , í•„ìš”ì‹œ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 3. ì „ì‹œíšŒ ê´€ë¦¬ (ë°±ì—”ë“œ)

```kotlin
@Service
class ExhibitionService(
    private val exhibitionRepository: ExhibitionRepository,
    private val s3Service: S3Service
) {
    @Transactional(readOnly = true)
    fun findById(id: Int): Exhibition? = exhibitionRepository.findById(id).orElse(null)

    @Transactional
    fun save(exhibition: Exhibition, posterImage: MultipartFile?): Exhibition {
        posterImage?.let {
            val imageUrl = s3Service.uploadFile("exhibitions", it.bytes, it.originalFilename!!)
            exhibition.posterImage = imageUrl
        }
        return exhibitionRepository.save(exhibition)
    }

    @Transactional
    fun deleteById(id: Int) {
        val exhibition = findById(id) ?: throw IllegalArgumentException("No Exhibition with given ID found")
        exhibition.posterImage?.let {
            s3Service.deleteFile(it)
        }
        exhibitionRepository.deleteById(id)
    }

    @Transactional
    fun update(id: Int, updatedExhibition: Exhibition, posterImage: MultipartFile?): Exhibition {
        val exhibition = exhibitionRepository.findById(id)
            .orElseThrow { IllegalArgumentException("No Exhibition with given ID found") }

        exhibition.posterImage?.let {
            s3Service.deleteFile(it)
        }

        posterImage?.let {
            val imageUrl = s3Service.uploadFile("exhibitions", it.bytes, it.originalFilename!!)
            exhibition.posterImage = imageUrl
        }

        return exhibitionRepository.save(exhibition)
    }
}

```

**ì„¤ëª…**:
ì´ ì½”ë“œ ìŠ¤ë‹ˆí«ì€ **ì „ì‹œíšŒ ê´€ë¦¬** ê¸°ëŠ¥ì„ ë‹´ë‹¹í•˜ëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

- `save` ë©”ì„œë“œëŠ” ì „ì‹œíšŒë¥¼ ì €ì¥í•˜ë©°, í¬ìŠ¤í„° ì´ë¯¸ì§€ê°€ ìˆì„ ê²½ìš° AWS S3ì— ì—…ë¡œë“œí•˜ì—¬ ì „ì‹œíšŒì˜ í¬ìŠ¤í„° URLì„ ì €ì¥í•©ë‹ˆë‹¤.
- `deleteById` ë©”ì„œë“œëŠ” ì „ì‹œíšŒë¥¼ ì‚­ì œí•˜ëŠ”ë°, ì‚­ì œí•˜ê¸° ì „ì— S3ì— ì €ì¥ëœ í¬ìŠ¤í„° ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.
- `update` ë©”ì„œë“œëŠ” ì „ì‹œíšŒ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•˜ë©°, ì—…ë°ì´íŠ¸ ì‹œ ì´ì „ í¬ìŠ¤í„° ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•˜ê³  ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ì—¬ ê°±ì‹ í•©ë‹ˆë‹¤.
